{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { backServer } from '@/config/axiosConfig';\nexport default {\n  data() {\n    return {\n      user: {},\n      isValid: {\n        email: false,\n        password: false\n      },\n      isDisable: true\n    };\n  },\n  created() {\n    this.user.email = this.$route.query.email, this.emailHandler();\n  },\n  methods: {\n    logIn() {\n      backServer.post('/log', this.user).then(res => {\n        if (res.data.message === \"connexion etablie\") {\n          localStorage.setItem(\"token\", res.data.access_token);\n          localStorage.setItem(\"name\", res.data.info_user.name);\n          localStorage.setItem(\"id\", res.data.info_user.id);\n          if (res.data.info_user.role === \"admin\") {\n            localStorage.setItem(\"role\", res.data.info_user.role);\n            this.$router.push('/admin/entrer');\n          } else {\n            this.$router.push('/entrer');\n          }\n        } else {\n          this.errorMsg = res.data.message;\n          this.toggleError = true;\n          setTimeout(this.clearMessage, 5000);\n          this.$router.push('/');\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    login() {\n      backServer.post('/login', this.user).then(res => {\n        if (res.data.message === 'connected') {\n          localStorage.setItem('id');\n          this.$router.push(`/Chat`);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    inputHandler(e) {\n      switch (e.target.id) {\n        case 'email':\n          /^[a-z0-9._-]+@[a-z0-9._-]+\\.[a-z]{2,6}$/.test(e.target.value) ? this.isValid['email'] = true : this.isValid['email'] = false;\n          break;\n        case 'password':\n          e.target.value.length >= 6 ? this.isValid['password'] = true : this.isValid['password'] = false;\n          break;\n      }\n      if (this.isValid['email'] && this.isValid['password']) {\n        this.isDisable = false;\n      } else {\n        this.isDisable = true;\n      }\n    },\n    emailHandler() {\n      /^[a-z0-9._-]+@[a-z0-9._-]+\\.[a-z]{2,6}$/.test(this.user.email) ? this.isValid['email'] = true : this.isValid['email'] = false;\n    }\n  }\n};","map":{"version":3,"names":["backServer","data","user","isValid","email","password","isDisable","created","$route","query","emailHandler","methods","logIn","post","then","res","message","localStorage","setItem","access_token","info_user","name","id","role","$router","push","errorMsg","toggleError","setTimeout","clearMessage","catch","err","console","log","login","inputHandler","e","target","test","value","length"],"sources":["src/components/SignIn.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n          <div class=\"col-lg-3\">\n          <div  class=\"avatar-container d-smart-none bg-light\">\n             <label for=\"formFileLg\">\n                <img alt=\"Avatar\" class=\"avatar-image\" >\n              </label>\n            <div class=\"avatar-middle\">\n                Photo\n            </div>\n          </div>\n          </div>\n          <div class=\"col-lg-8\">\n          <div class=\"px-lg-5 px-4\">\n            <h2 class=\"mb-4 font-weight-medium\">LogIn</h2>\n            <div class=\"content\">\n                <form class=\" sign-up\" @submit.prevent=\"login\">\n                  <div class=\"form-floating mb-3\">\n                    <input type=\"text\" class=\"form-control\" :class=\"isValid['email'] ? 'is-valid' : 'not-valid'\" id=\"email\" required placeholder=\"\"  v-model=\"user['email']\" @keyup=\"inputHandler\">\n                    <label for=\"email\">Email</label>\n                  </div>\n                  <div class=\"form-floating mb-3\">\n                    <input type=\"password\" class=\"form-control\" :class=\"isValid['password'] ? 'is-valid' : 'not-valid'\" id=\"password\" required placeholder=\"\" autocomplete=\"off\"  v-model=\"user['password']\" @keyup=\"inputHandler\">\n                    <label for=\"password\">Password</label>\n                  </div>\n                  <div class=\"d-flex align-items-center justify-content-end\">\n                    <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"false\">Login</button>\n                  </div>\n                </form>\n            </div>\n          </div>\n          </div>\n        </div>\n</template>\n<script>\n\n  import { backServer } from '@/config/axiosConfig'\n\n  export default{\n\n    data(){\n      return{\n          user:{},\n          isValid:{email: false, password: false},\n          isDisable: true,\n      }\n    },\n    created(){\n      this.user.email=this.$route.query.email,\n      this.emailHandler()\n      \n    },\n    methods: {\n      logIn(){ \n        backServer.post('/log',this.user)\n          .then(res => {\n              if(res.data.message === \"connexion etablie\"){\n                localStorage.setItem(\"token\",res.data.access_token )\n                localStorage.setItem(\"name\",res.data.info_user.name)\n                localStorage.setItem(\"id\",res.data.info_user.id)\n                if(res.data.info_user.role === \"admin\"){\n                  localStorage.setItem(\"role\",res.data.info_user.role)\n                  this.$router.push('/admin/entrer')  \n                }else {\n                  this.$router.push('/entrer')\n                }\n              }else {\n                this.errorMsg = res.data.message\n                this.toggleError = true\n                setTimeout(this.clearMessage,5000)\n                this.$router.push('/')\n              }\n          }).catch(err => {\n              console.log(err);\n          })\n        },\n      login(){\n        \n        backServer.post('/login',this.user)\n          .then(res => {\n              if(res.data.message === 'connected')\n              {\n                localStorage.setItem('id')\n                this.$router.push(`/Chat`) \n              } \n          }).catch(err => {\n              console.log(err);\n          })\n        \n      },\n      inputHandler(e){\n        switch (e.target.id) {\n          case 'email':\n            /^[a-z0-9._-]+@[a-z0-9._-]+\\.[a-z]{2,6}$/.test(e.target.value) ? this.isValid['email'] = true : this.isValid['email'] = false\n            break;\n          case 'password':\n              e.target.value.length >=6 ? this.isValid['password'] = true : this.isValid['password'] = false\n            break;\n        }\n\n        if(this.isValid['email'] && this.isValid['password'])\n        {\n          this.isDisable = false\n        }else{\n          this.isDisable = true\n        }\n      },\n      emailHandler(){\n        /^[a-z0-9._-]+@[a-z0-9._-]+\\.[a-z]{2,6}$/.test(this.user.email) ? this.isValid['email'] = true : this.isValid['email'] = false\n      }\n      \n    }\n  }\n</script>"],"mappings":";AAoCA,SAAAA,UAAA;AAEA;EAEAC,KAAA;IACA;MACAC,IAAA;MACAC,OAAA;QAAAC,KAAA;QAAAC,QAAA;MAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAL,IAAA,CAAAE,KAAA,QAAAI,MAAA,CAAAC,KAAA,CAAAL,KAAA,EACA,KAAAM,YAAA;EAEA;EACAC,OAAA;IACAC,MAAA;MACAZ,UAAA,CAAAa,IAAA,cAAAX,IAAA,EACAY,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAd,IAAA,CAAAe,OAAA;UACAC,YAAA,CAAAC,OAAA,UAAAH,GAAA,CAAAd,IAAA,CAAAkB,YAAA;UACAF,YAAA,CAAAC,OAAA,SAAAH,GAAA,CAAAd,IAAA,CAAAmB,SAAA,CAAAC,IAAA;UACAJ,YAAA,CAAAC,OAAA,OAAAH,GAAA,CAAAd,IAAA,CAAAmB,SAAA,CAAAE,EAAA;UACA,IAAAP,GAAA,CAAAd,IAAA,CAAAmB,SAAA,CAAAG,IAAA;YACAN,YAAA,CAAAC,OAAA,SAAAH,GAAA,CAAAd,IAAA,CAAAmB,SAAA,CAAAG,IAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;YACA,KAAAD,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAC,QAAA,GAAAX,GAAA,CAAAd,IAAA,CAAAe,OAAA;UACA,KAAAW,WAAA;UACAC,UAAA,MAAAC,YAAA;UACA,KAAAL,OAAA,CAAAC,IAAA;QACA;MACA,GAAAK,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA;IACA;IACAG,MAAA;MAEAlC,UAAA,CAAAa,IAAA,gBAAAX,IAAA,EACAY,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAd,IAAA,CAAAe,OAAA,kBACA;UACAC,YAAA,CAAAC,OAAA;UACA,KAAAM,OAAA,CAAAC,IAAA;QACA;MACA,GAAAK,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;MACA;IAEA;IACAI,aAAAC,CAAA;MACA,QAAAA,CAAA,CAAAC,MAAA,CAAAf,EAAA;QACA;UACA,0CAAAgB,IAAA,CAAAF,CAAA,CAAAC,MAAA,CAAAE,KAAA,SAAApC,OAAA,wBAAAA,OAAA;UACA;QACA;UACAiC,CAAA,CAAAC,MAAA,CAAAE,KAAA,CAAAC,MAAA,aAAArC,OAAA,2BAAAA,OAAA;UACA;MACA;MAEA,SAAAA,OAAA,kBAAAA,OAAA,cACA;QACA,KAAAG,SAAA;MACA;QACA,KAAAA,SAAA;MACA;IACA;IACAI,aAAA;MACA,0CAAA4B,IAAA,MAAApC,IAAA,CAAAE,KAAA,SAAAD,OAAA,wBAAAA,OAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}